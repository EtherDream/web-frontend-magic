# 2015-10-8

æƒ³åˆ°ä¸€ä¸ªçŒ¥ççš„æ–¹æ³•ï¼Œå¯¹ä»˜ç®€å•çš„è¿è¡Œå•†å¹¿å‘Šè„šæœ¬ï¼Œè®©å®ƒæ’å…¥åˆ°é”™è¯¯çš„åœ°æ–¹~

```html
<!doctype html>
<!--
<html>
  <head></head>
  <body></body>
</html>
-->
<html>
  <head></head>
  <body>
    Hello World
  </body>
</html>
```

> å½“ç„¶ï¼Œè¿™ç§æ–¹æ¡ˆåªé€‚ç”¨äºæ’ä¸€æ¬¡çš„æƒ…å†µï¼Œä¾‹å¦‚ nginx è®¾ç½®äº† `sub_filter_once on`ã€‚å¦‚æœç»™æ‰€æœ‰çš„ `<head>` éƒ½æ’å…¥é‚£å°±æ²¡åŠæ³•äº†ã€‚



# 2015-9-8

çœ‹ä¹‹å‰çš„ PPT æ—¶ç¿»åˆ°ä¸€ä¸ªæœ‰è¶£çš„ Demo

![image](https://user-images.githubusercontent.com/1072787/69002633-0ed1d680-092e-11ea-9570-839f83f4a012.png)

![image](https://user-images.githubusercontent.com/1072787/69002636-13968a80-092e-11ea-9cf0-d8f0119130e5.png)

https://www.etherdream.com/webdraw/demo/bin/

åˆšç ”ç©¶ HaXe æ—¶çªå‘å¥‡æƒ³ï¼Œç”¨ä¸€ç§è¯­è¨€ï¼ŒåŒæ—¶ç”Ÿæˆ HTML5 å’Œ Flash ä¸¤ä¸ªç‰ˆæœ¬ã€‚è¿™æ ·å°±ä¸ç”¨è€ƒè™‘ä½ç‰ˆæœ¬æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜äº†ã€‚

> å…³äºä½¿ç”¨ haXe åšå°æ¸¸æˆçš„ä¼˜åŠ¿ï¼Œåœ¨[è¿™ä¸ª PPT](https://github.com/EtherDream/myppt/blob/master/JS%E5%B0%8F%E6%B8%B8%E6%88%8F%E5%88%B6%E4%BD%9C%E6%8A%80%E5%B7%A7.pdf)ä¸­æœ‰è®²è§£ã€‚


# 2015-8-28

Cloud9 è¯•ç”¨ç‰ˆéƒ½é‚£ä¹ˆå¼ºå¤§ï¼

![image](https://user-images.githubusercontent.com/1072787/69002872-68d49b00-0932-11ea-9629-2fa0daf818c8.png)

![image](https://user-images.githubusercontent.com/1072787/69002921-c7e6df80-0933-11ea-954e-1522b4e67e58.png)



# 2015-8-20

æœ‰è¶£çš„ emoji æ•ˆæœï¼š

```js
var i = 0
var arr = ['ğŸŒ‘', 'ğŸŒ’', 'ğŸŒ“', 'ğŸŒ”', 'ğŸŒ•', 'ğŸŒ–', 'ğŸŒ—', 'ğŸŒ˜']
setInterval(function(){
  location.hash = arr[i++ % arr.length]
}, 50);
```

å¦‚æœåœ°å€æ é‡Œä¸æƒ³æœ‰ `#`ï¼Œå¯æ¢æˆï¼š

```js
setInterval(function(){
  history.replaceState('', '', '/' + arr[i++ % arr.length])
}, 50);
```


# 2015-8-13

æ— æ„ä¸­å‘ç° nginx æœ‰ä¸ª `gunzip` çš„æŒ‡ä»¤ï¼Œç»ˆäºè§£å†³äº†æ— æ³•åœ¨ gzip ç½‘é¡µä¸­ä½¿ç”¨ `sub_filter` çš„é—®é¢˜ã€‚

ä¹‹å‰ç ”ç©¶ ä¸­é—´äººä»£ç†æ—¶ï¼Œä¸ºäº†èƒ½åœ¨ HTML ä¸­æ’å…¥è„šæœ¬ï¼Œè¿˜å¾—æŠŠè¯·æ±‚å¤´çš„ `Accept-Encoding` å»æ‰ï¼Œè®©æœåŠ¡å™¨ä¸è¿”å›å‹ç¼©æ ¼å¼ï¼Œæ‰èƒ½é¡ºåˆ©æ‰§è¡Œ `sub_filter`ã€‚ä½†è¿™æ ·åˆä¼šæµªè´¹ç½‘ç»œæµé‡ï¼Œå¾ˆæ˜¯çº ç»“ã€‚

ç°åœ¨æœ‰äº† `gunzip`ï¼Œåªéœ€åœ¨ nginx å†…éƒ¨å†å¥—ä¸€æ¬¡ä»£ç†ï¼Œå³å¯æ³¨å…¥ JS åˆ°å‹ç¼©åçš„é¡µé¢é‡Œäº†~

```bash
# nginx.conf
events {
  worker_connections      1024;
}

http {
  resolver                8.8.8.8;
  server {
    listen                8080;
    gzip                  on;

    location / {
      proxy_set_header    host $http_host;
      proxy_pass          http://unix:/tmp/mitm.sock;

      sub_filter          <head  '<script>console.warn("inject!!!")</script><head';
      sub_filter_once     on;
    }
  }

  server {
    listen                unix:/tmp/mitm.sock;
    gunzip                on;

    location / {
      proxy_set_header    Accept-Encoding gzip;
      proxy_pass          http://$http_host;
    }
  }
}
```

![image](https://user-images.githubusercontent.com/1072787/69004478-cd055800-094e-11ea-8e61-1d92e7157e42.png)



# 2015-8-12

ä¹‹å‰æœ‰äººä¸ºäº†éšè”½æ‰§è¡ŒåŠ å¯†åçš„ JSï¼Œå°è¯•ç”¨ `(function(){}).constructor` å–ä»£ `Function`ï¼Œä¾‹å¦‚ï¼š

```js
(function(){}).constructor('alert(1)')()
```

å½“æ—¶ä»¥ä¸ºè¿™ç§æ–¹æ¡ˆæ²¡æ³•ç›‘æ§ã€‚ä¸è¿‡åæ¥æƒ³åˆ°äº†ç ´è§£æ–¹æ¡ˆï¼Œåªéœ€å…ˆæ‰§è¡Œï¼š

```js
Function.prototype.__defineGetter__('constructor', function() {
  return function() {
    console.log(arguments)
    return Function.apply(this, arguments)
  }
})
```

è¿™æ ·å°±å¯ä»¥ hook è¯»å–ä»»ä½•å‡½æ•°çš„ `constructor` å±æ€§ï¼Œç„¶åè¿”å›ä¸€ä¸ªåŒ…è£…è¿‡çš„ `Function` å‡½æ•°ï¼Œç”¨äºè·Ÿè¸ªä¹‹åæ‰§è¡Œæ—¶ä¼ å…¥çš„å‚æ•°~



# 2015-8-6

æ€è€ƒé¢˜ï¼šè·å–é—­åŒ…å†…çš„å˜é‡ã€‚

```js
// ç›®æ ‡ï¼šè·å–é—­åŒ…å†…å®¹çš„ token å˜é‡ï¼Œæäº¤ç»™ check æ ¡éªŒ
// å¤‡æ³¨ï¼š
//   æ‰§è¡Œç¯å¢ƒéœ€è”ç½‘ï¼Œæ€»ç”¨æ—¶ä¸è¶…è¿‡ 10s
//   å…¼å®¹ç°ä»£æµè§ˆå™¨å³å¯ï¼Œè‡ªå·±å¼¹ alert('win') ä¸ç®—~
(function() {
  var token = '$' + Math.random()

  new Image().src = 'https://www.baidu.com/s?wd=' + token

  window.check = function(v) {
    if (v === token) {
      alert('win')    // é€šè¿‡
    }
  }
})()


// ä½ çš„ä»£ç å†™åœ¨æ­¤å¤„...
```

ç­”æ¡ˆï¼šhttps://jsfiddle.net/tnuraL07/



# 2015-8-25

Chrome ç»ˆäºæ”¯æŒ DOM åŸå‹ä¸Šçš„ getter / setterã€‚è¿‡å»å†™çš„[ã€Šå‰ç«¯é˜²ç«å¢™ -- å¯ç–‘æ¨¡å—æ‹¦æˆªã€‹](https://fex.baidu.com/blog/2014/06/xss-frontend-firewall-2/) å¯ä»¥å¤§å¹…ç²¾ç®€äº†ã€‚

![image](https://user-images.githubusercontent.com/1072787/69005230-efe93980-0959-11ea-8fac-9f769495e612.png)




# 2015-7-29

ä¹‹å‰å†™[ã€ŠXSS å‰ç«¯é˜²ç«å¢™ â€”â€” å†…è”äº‹ä»¶æ‹¦æˆªã€‹](https://fex.baidu.com/blog/2014/06/xss-frontend-firewall-1/
)æ—¶ï¼Œæ¼ä¸€ä¸ªåŸç†å›¾ï¼Œç°è¡¥ä¸Šï¼š

![image](https://user-images.githubusercontent.com/1072787/69005218-cc25f380-0959-11ea-82fc-650ec64eed65.png)


# 2015-7-27

[HTML5 Service Workers](https://www.w3.org/TR/2015/WD-service-workers-20150625/) å¯ä»¥æ¥ç®¡æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ï¼Œæœ¬ä»¥ä¸º MITM æ”»å‡»åˆæœ‰æ–°ç©æ³•äº†ï¼Œç»“æœè¿™è´§åªèƒ½åœ¨ HTTPS ä¸‹å¼€å¯ã€‚ã€‚ã€‚

æŸ¥äº†ä¸‹åŸæ¥äººå®¶æ—©å°±è€ƒè™‘åˆ°äº†~

![image](https://user-images.githubusercontent.com/1072787/69005259-80c01500-095a-11ea-9fc1-5f8e46daf1d6.png)



# 2015-6-4

FireFox å±…ç„¶ä¼šæ£€æµ‹ã€Œæ‰©å±•åã€å’Œã€ŒMIMEã€æ˜¯å¦åŒ¹é…ï¼Œå°±è¿™ç‚¹æ¯”å…¶ä»–æµè§ˆå™¨æœ‰è¿›æ­¥~

è€Œ Chrome ä»ç„¶å¯ä»¥ç©æ‰©å±•åçš„å°æŠŠæˆï¼Œä¾‹å¦‚æ‰©å±•åæ˜¯ GIF çš„ URL ä¹Ÿå¯ä»¥è¿è¡Œ JSï¼š

https://www.etherdream.com/upload/20150603.gif



# 2015-5-8

è®¾ç½®äº† `X-Frame-Options` çš„é¡µé¢æ€ä¹ˆç©åå°„å‹ XSSï¼Ÿ

å¦‚æœå½“å‰å­˜åœ¨æ¥æºé¡µçš„è¯ï¼Œè·³è½¬ `opener.location` å°±å¯ä»¥ï¼ˆå¹¶ä¸”è¿™ä¸ªå±æ€§æ— è§†åŒæºç­–ç•¥~ï¼‰


â€‹
# 2015-5-7

TypeScript ç¼–è¯‘å™¨å±…ç„¶æ˜¯ç”¨ TypeScript å®ç°çš„ï¼Œæœ€ç»ˆç¼–è¯‘æˆ JS è·‘åœ¨ NodeJS é‡Œã€‚ã€‚ã€‚

è™½è¯´è¯­è¨€è‡ªä¸¾ä¸€ç›´éƒ½æ˜¯æƒ¯ä¾‹ï¼Œä½†æ¯•ç«Ÿ JS æ•ˆç‡å¾ˆä½ï¼Œå¯¼è‡´ TS ç¼–è¯‘å¾ˆæ…¢ï¼ŒåŠå¤©ç”µè„‘å°±æ»šçƒ«äº†~



# 2015-5-6

æ¶ä½œå‰§ XSSï¼š

```js
for (i = 0; i < 4; i++) {
  document.cookie=i+'='+'X'.repeat(3000)
}
```

![image](https://user-images.githubusercontent.com/1072787/69005395-acdc9580-095c-11ea-82f6-b610e8120b08.png)

> è¯¦è§£ï¼šhttps://www.cnblogs.com/index-html/p/cookie-dos.html



# 2015-4-20

æƒ³åˆ°ä¸€ä¸ªæµ‹è¯•ç”¨æˆ·æ˜¯å¦ä¸Šè¿‡æŸç½‘ç«™çš„æ–¹æ³•ï¼šåŠ è½½è¯¥ç½‘ç«™ logoï¼Œç¬é—´å®Œæˆè¯´æ˜æœ‰ç¼“å­˜ï¼Œä¹‹å‰è®¿é—®è¿‡ï¼›åä¹‹äº¦ç„¶~



# 2015-4-14

ä¸ç¦ç”¨ç¬¬ä¸‰æ–¹ cookie å®åœ¨å¤ªå±é™©äº†~ ä¸€å¤§æ³¢åº”ç”¨è¢«å‘æ­»



# 2015-3-31

é 80 ç«¯å£çš„ IP ä¹Ÿèƒ½æ²³èŸ¹ã€‚ã€‚ã€‚

![image](https://user-images.githubusercontent.com/1072787/69005476-f5e11980-095d-11ea-8763-082fc164e357.png)

![image](https://user-images.githubusercontent.com/1072787/69005479-fa0d3700-095d-11ea-9903-ff4bc9de0164.png)



# 2015-3-17

æœªæ¥ webapp å¤´éƒ¨ä¼šä¸ä¼šåŠ ä¸Šè¿™å¥~~

```html
<!--[if IE]>
  This program cannot be run in IE Mode.
<![endif]-->
```


# 2015-3-5

é™æ€èµ„æºå­˜ localStorage å°±æ˜¯æ°´å‘æ¼æ´çš„å‰å…†ï¼Œé£é™©è¿œè¿œå¤§äºä¼˜åŒ–ã€‚



# 2015-3-2

å¯ä»¥ç”¨ CSP ç›‘æ§ HTTPS ä¸­çš„ HTTP èµ„æºï¼Œåªå…è®¸ `https://*` å³å¯æ‰¾å‡ºå…¨ç«™ HTTPS å‡çº§ä¸­çš„é—æ¼ç‚¹~

æˆ–è€…ç”¨ä¹‹å‰æåˆ°çš„ onload/onerror ç›‘æ§èµ„æºåŠ è½½ï¼š

https://www.cnblogs.com/index-html/p/use-onload-event-trace-http-hijack.html

ç›¸æ¯” CSPï¼Œè¿™ç§æ–¹æ¡ˆä¸ŠæŠ¥çš„ä¿¡æ¯æ›´è¯¦ç»†ï¼Œæ–¹ä¾¿æ’æŸ¥ã€‚



# 2015-3-1

`bj.cn` å±…ç„¶æ˜¯é¡¶çº§åŸŸå~

æŸ¥äº†ä¸‹ TLD çš„å®˜æ–¹åˆ—è¡¨ï¼šhttps://publicsuffix.org/list/effective_tld_names.dat

å±…ç„¶æœ‰è¿™ä¹ˆå¤šï¼Œè€Œä¸”è¿˜æœ‰è¿™ä¹ˆé•¿çš„é¡¶çº§åŸŸåï¼š`higashimatsuyama.saitama.jp`


# 2015-2-3

JS é¡µé¢æˆªå±çš„æ•ˆæœ~

![image](https://user-images.githubusercontent.com/1072787/69006857-66913180-0970-11ea-9c5d-f7822d4ca985.png)

![image](https://user-images.githubusercontent.com/1072787/69006851-4bbebd00-0970-11ea-8827-63068ffba2e5.png)

![image](https://user-images.githubusercontent.com/1072787/69006853-5711e880-0970-11ea-981f-377f479d9660.png)

åŸç†å¾ˆç®€å•ï¼ŒJS é‡‡é›†æ•´ä¸ª DOM æ ‘ï¼Œä»¥åŠé¼ æ ‡ä½ç½®ã€æ»šåŠ¨æ¡åæ ‡ç­‰ç­‰ï¼Œç¼–ç å‹ç¼©åå‘ç»™åç«¯ã€‚

åç«¯æ ¹æ®è¿™äº›ä¿¡æ¯ï¼Œåœ¨ç›¸åŒçš„æµè§ˆå™¨å†…æ ¸ä¸­æ¸²æŸ“å‡ºç”¨æˆ·å½“å‰çœ‹åˆ°çš„ç½‘é¡µæ¨¡æ ·ã€‚

åŒæ—¶ï¼Œæ ¹æ® User-Agent å¤§è‡´æ¨¡ä»¿æµè§ˆå™¨çš„å¤–è§‚~

ä¸è¿‡ç›®å‰åªèƒ½é™æ€æˆªå›¾ï¼Œä¹‹åå†æ”¹è¿›æˆåŠ¨æ€å½•å±çš„æ•ˆæœ~ è™½ç„¶è¿ç»­ä¸æ–­çš„æˆªå›¾ä¹Ÿå¯ä»¥å½“åšåŠ¨ç”»ï¼Œä½†æ•ˆç‡å¤ªä½ã€‚ç›®å‰åœ¨è€ƒè™‘ä½¿ç”¨ä¸€äº› diff ç®—æ³•ï¼Œåªéœ€å¾ˆå°çš„å¼€é”€å°±å¯ä»¥å®ç°é«˜ fps å½•å±ã€‚



# 2015-1-1

åå¹´å‰çš„æ‰‹ç»˜é»‘é­”æ³•ã€‚ã€‚ã€‚å¦‚æœè¿˜èƒ½æ‰¾åˆ°ï¼Œä¹‹åç»§ç»­åˆ†äº«~

![image](https://user-images.githubusercontent.com/1072787/69006950-026f6d00-0972-11ea-918b-fde25e27843f.png)

![image](https://user-images.githubusercontent.com/1072787/69006952-08fde480-0972-11ea-8b81-2a282e3fc385.png)

![image](https://user-images.githubusercontent.com/1072787/69006942-d8b64600-0971-11ea-95e0-87cb6b08e0e3.png)


# 2014

å³å°†æ›´æ–°...